{"version":3,"sources":["test/dom-translate-jsx.js","test/index-component.js"],"names":["React","createElement","tag","attrs","children","element","width","color","alert","console","log","Component","props","state","Welcome","name","createComponent","component","instance","prototype","render","constructor","setComponentProps","base","componentWillMount","componentWillReceiveProps","renderComponent","componentWillUpdate","_render","componentDidUpdate","componentDidMount","parentNode","replaceChild","_component","vnode","container","appendChild","undefined","String","textNode","document","createTextNode","dom","Object","keys","forEach","key","value","setAttribute","child","test","toLowerCase","style","cssText","k","removeAttribute","ReactDOM","innerHTML","getElementById"],"mappings":"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","file":"index-component.ee2df55d.js","sourceRoot":"..","sourcesContent":["\r\n// please actions this is use transform-react-jsx\r\nconst React = {\r\n  createElement,\r\n}\r\n\r\nfunction createElement(tag, attrs, ...children) {\r\n  return {\r\n    tag,\r\n    attrs,\r\n    children\r\n  }\r\n}\r\n\r\nexport let element = (\r\n  <div className=\"hello\" style={{ width: \"100px\", color: \"red\" }}>\r\n    hello<span onClick={() => alert('hello world')}>world!</span>\r\n  </div>\r\n);\r\nconsole.log(element)\r\n\r\nclass Component {\r\n  constructor(props = {}) {\r\n    this.state = {};\r\n    this.props = props;\r\n  }\r\n}\r\n\r\n\r\nexport class Welcome extends Component {\r\n  render() {\r\n    return <h1>Hello, {this.props.name}</h1>;\r\n  }\r\n}\r\nconsole.log(React.createElement(Welcome))","import { Welcome } from './dom-translate-jsx';\r\n// v2 component and function , add props and state\r\n// just crateComponent setComponent\r\n// 组件的生命周期方法也会在这里面\r\n\r\nfunction createComponent(component, props) {\r\n  let instance;\r\n  if (component.prototype && component.prototype.render) {\r\n    // class \r\n    instance = new component(props);\r\n  } else {\r\n    // function\r\n    instance = new component(props);\r\n    instance.constructor = component;\r\n    instance.render = function () {\r\n      return this.constructor(props);\r\n    }\r\n  }\r\n  return instance;\r\n}\r\n\r\n// refresh props ,two life componentWillMount , componentWillReceiveProps\r\nfunction setComponentProps(component, props) {\r\n  if (!component.base) {\r\n    if (component.componentWillMount) return componentWillMount();\r\n  } else if (component.componentWillReceiveProps) {\r\n    component.componentWillReceiveProps(props);\r\n  }\r\n  component.props = props;\r\n  renderComponent(component);\r\n}\r\n\r\n// componentWillUpdate，componentDidUpdate，componentDidMount\r\nfunction renderComponent(component) {\r\n  let base;\r\n  const render = component.render();\r\n  if (component.base && component.componentWillUpdate) {\r\n    component.componentWillUpdate();\r\n  }\r\n  base = _render(render);\r\n\r\n  if (component.base) {\r\n    if (component.componentDidUpdate) component.componentDidUpdate();\r\n  } else if (component.componentDidMount) {\r\n    component.componentDidMount();\r\n  }\r\n\r\n  if (component.base && component.base.parentNode) {\r\n    component.base.parentNode.replaceChild(base, component.base);\r\n  }\r\n\r\n  component.base = base;\r\n  base._component = component;\r\n}\r\n\r\nfunction render(vnode, container) {\r\n  return container.appendChild(_render(vnode));\r\n}\r\n\r\nfunction _render(vnode) {\r\n  if (vnode === undefined || vnode === null || typeof vnode === 'boolean') return vnode = '';\r\n\r\n  if (typeof vnode === 'number') vnode = String(vnode);\r\n\r\n  if (typeof vnode === 'string') {\r\n    const textNode = document.createTextNode(vnode);\r\n    return textNode;\r\n  }\r\n\r\n  // just function\r\n  if (typeof vnode.tag === 'function') {\r\n    const component = createComponent(vnode.tag, vnode.attrs);\r\n\r\n    setComponentProps(component, vnode.attrs);\r\n\r\n    return component.base;\r\n  }\r\n\r\n  const dom = document.createElement(vnode.tag);\r\n\r\n  if (vnode.attrs) {\r\n    Object.keys(vnode.attrs).forEach(key => {\r\n      const value = vnode.attrs[key];\r\n      setAttribute(dom, key, value)\r\n    })\r\n  }\r\n\r\n  if (vnode.children) {\r\n    vnode.children.forEach(child => render(child, dom));\r\n  }\r\n\r\n  return dom;\r\n}\r\n\r\nfunction setAttribute(dom, name, value) {\r\n  if (name === 'classname') {\r\n    name = 'class';\r\n  }\r\n  if (/on\\w+/.test(name)) {\r\n    // event\r\n    name = name.toLowerCase();\r\n    dom[name] = value || '';\r\n  } else if (name === 'style') {\r\n    if (!value || typeof value === 'string') {\r\n      dom.style.cssText = value || '';\r\n    } else if (value || typeof value === 'object') {\r\n      for (let k in value) {\r\n        dom.style[k] = typeof value[k] === 'number' ? value[k] + 'px' : value[k]\r\n      }\r\n    }\r\n  } else {\r\n    // simple attrs\r\n    if (name in dom) {\r\n      dom[name] = value;\r\n    }\r\n    if (value) {\r\n      dom.setAttribute(name, value);\r\n    } else {\r\n      dom.removeAttribute(name);\r\n    }\r\n  }\r\n}\r\n\r\nconst ReactDOM = {\r\n  render: (vnode, container) => {\r\n    container.innerHTML = '';\r\n    return render(vnode, container)\r\n  }\r\n}\r\n\r\nReactDOM.render(\r\n  Welcome(),\r\n  document.getElementById('app')\r\n)"]}