{"version":3,"sources":["test/react.js"],"names":["createElement","tag","attrs","children","render","vnode","container","textNode","document","createTextNode","appendChild","dom","Object","keys","forEach","key","value","setAttribute","child","name","test","toLowerCase","style","cssText","k","removeAttribute","ReactDOM","innerHTML","getElementById"],"mappings":"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","file":"react.fdd9b5a5.js","sourceRoot":"..","sourcesContent":["// import { instantReactComponent } from \"./reactDomTextComponent\";\r\n// import { ReactElement } from './reactElement';\r\n\r\nfunction createElement(tag, attrs, children) {\r\n  return {\r\n    tag,\r\n    attrs,\r\n    children\r\n  }\r\n}\r\n\r\n// v1\r\n// const React = {\r\n//   createElement\r\n// }\r\n\r\n// const element = (<div>hello<span>world!</span></div>)\r\n\r\n// console.log(element);\r\n\r\nfunction render(vnode, container) {\r\n  if (typeof vnode === 'string') {\r\n    const textNode = document.createTextNode(vnode);\r\n    return container.appendChild(textNode);\r\n  }\r\n  const dom = document.createElement(vnode.tag);\r\n  if (vnode.attrs) {\r\n    Object.keys(vnode.attrs).forEach(key => {\r\n      const value = vnode.attrs[key];\r\n      setAttribute(dom, key, value)\r\n    })\r\n  }\r\n  vnode.children.forEach(child => render(child, dom));\r\n  return container.appendChild(dom);\r\n}\r\n\r\nfunction setAttribute(dom, name, value) {\r\n  if (name === 'classname') {\r\n    name = 'class';\r\n  }\r\n  if (/on\\w+/.test(name)) {\r\n    // event\r\n    name = name.toLowerCase();\r\n    dom[name] = value || '';\r\n  } else if (name === 'style') {\r\n    if (!value || typeof value === 'string') {\r\n      dom.style.cssText = value || '';\r\n    } else if (value || typeof value === 'object') {\r\n      for (let k in value) {\r\n        dom.style[k] = typeof value[k] === 'number' ? value[k] + 'px' : value[k]\r\n      }\r\n    }\r\n  } else {\r\n    // simple attrs\r\n    if (name in dom) {\r\n      dom[name] = value;\r\n    }\r\n    if (value) {\r\n      dom.setAttribute(name, value);\r\n    } else {\r\n      dom.removeAttribute(name);\r\n    }\r\n  }\r\n}\r\n\r\nconst ReactDOM = {\r\n  render: (vnode, container) => {\r\n    container.innerHTML = '';\r\n    return render(vnode, container)\r\n  }\r\n}\r\n\r\n// v2\r\nReactDOM.render(\r\n  <div>helloworld</div>,\r\n  document.getElementById('app')\r\n)\r\n\r\n// export const React = {\r\n//   nextReactRootIndex: 0,\r\n//   render: function (element, container) {\r\n//     const componetnInstant = instantReactComponent(element);\r\n//     // dom mount\r\n//     const markup = componetnInstant.mountComponent(React.nextReactRootIndex++);\r\n\r\n//     const app = document.getElementById('app');\r\n\r\n//     mount(markup, app);\r\n//   },\r\n//   createElement: function (type, config, children) {\r\n//     let props = {};\r\n//     let propName;\r\n//     config = config || {};\r\n//     const key = config.key || null;\r\n\r\n//     // copy attrs\r\n//     for (propName in config) {\r\n//       if (config.hasOwnProperty(propName) && propName !== 'key') {\r\n//         props[propName] = config[propName];\r\n//       }\r\n//     }\r\n\r\n//     // children\r\n//     const len = arguments.length - 2;\r\n//     if (len === 1) {\r\n//       props.children = Array.isArray(children) ? children : [children];\r\n//     } else if (len > 1) {\r\n//       const childrenArr = [...(arguments + 2)];\r\n//       props.children = childrenArr;\r\n//     }\r\n//     return new ReactElement(type, key, props);\r\n//   }\r\n// }\r\n\r\n// const mount = ($node, $target) => {\r\n//   $target.replaceWith($node)\r\n// }"]}